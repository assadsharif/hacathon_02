# [Task]: T051
# Phase VI: Observability Stack Values
# Default values for the observability Helm chart

# Namespace for monitoring resources
namespace: monitoring

# Enable/disable Prometheus stack
prometheus:
  enabled: true

# Custom application monitoring
applicationMonitoring:
  # Namespace where application is deployed
  appNamespace: todo-chatbot
  # Service names to monitor
  services:
    - name: todo-chatbot-backend
      port: 8000
      path: /metrics
    - name: todo-chatbot-frontend
      port: 3000
      path: /metrics

# kube-prometheus-stack subchart values
kube-prometheus-stack:
  # Prometheus configuration
  prometheus:
    prometheusSpec:
      # Retention period for metrics
      retention: 7d
      # Resource limits
      resources:
        requests:
          memory: 400Mi
          cpu: 200m
        limits:
          memory: 1Gi
          cpu: 500m
      # Scrape all ServiceMonitors across namespaces
      serviceMonitorSelectorNilUsesHelmValues: false
      serviceMonitorNamespaceSelector: {}
      serviceMonitorSelector: {}
      # Scrape all PodMonitors
      podMonitorSelectorNilUsesHelmValues: false
      podMonitorNamespaceSelector: {}
      podMonitorSelector: {}
    service:
      type: ClusterIP

  # Grafana configuration
  grafana:
    enabled: true
    adminPassword: "admin123"  # Change in production!
    service:
      type: LoadBalancer
    # Resource limits
    resources:
      requests:
        memory: 128Mi
        cpu: 100m
      limits:
        memory: 256Mi
        cpu: 200m
    # Default dashboards
    defaultDashboardsEnabled: true
    defaultDashboardsTimezone: utc
    # Additional data sources
    additionalDataSources: []
    # Sidecar for dashboard provisioning
    sidecar:
      dashboards:
        enabled: true
        label: grafana_dashboard
        labelValue: "1"
        searchNamespace: ALL
      datasources:
        enabled: true

  # Alertmanager configuration
  alertmanager:
    enabled: true
    alertmanagerSpec:
      resources:
        requests:
          memory: 64Mi
          cpu: 50m
        limits:
          memory: 128Mi
          cpu: 100m
    service:
      type: ClusterIP

  # Node exporter for node metrics
  nodeExporter:
    enabled: true

  # Kube state metrics
  kubeStateMetrics:
    enabled: true

  # Prometheus Operator
  prometheusOperator:
    enabled: true
    resources:
      requests:
        memory: 128Mi
        cpu: 100m
      limits:
        memory: 256Mi
        cpu: 200m

# Custom Grafana dashboards
dashboards:
  enabled: true
  # Todo Chatbot Application Dashboard
  todoChatbot:
    enabled: true
  # Dapr Pub/Sub Dashboard
  daprPubsub:
    enabled: true
  # Kubernetes Overview Dashboard
  kubernetesOverview:
    enabled: true
